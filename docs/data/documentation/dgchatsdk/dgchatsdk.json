{"schemaVersion":{"minor":3,"patch":0,"major":0},"variants":[{"paths":["\/documentation\/dgchatsdk\/dgchatsdk"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChatSDK","interfaceLanguage":"swift"},"sections":[],"metadata":{"roleHeading":"Article","modules":[{"name":"DGChatSDK"}],"role":"article","title":"DGChatSDK"},"hierarchy":{"paths":[["doc:\/\/DGChatSDK\/documentation\/DGChatSDK"]]},"kind":"article","abstract":[{"type":"text","text":"iOS SDK for DigitalGenius Chat."}],"primaryContentSections":[{"content":[{"text":"üè∑ License","type":"heading","anchor":"üè∑-License","level":2},{"inlineContent":[{"type":"codeVoice","code":"DGChatSDK"},{"type":"text","text":" is a property of Digital Genius Ltd."}],"type":"paragraph"},{"text":"Requirements","level":3,"type":"heading","anchor":"Requirements"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Xcode 14.2+","type":"text"}]}]}],"type":"unorderedList"},{"text":"Overview","level":2,"type":"heading","anchor":"Overview"},{"inlineContent":[{"text":"This SDK enables the DigitalGenius Chat Widget to be embedded anywhere inside an iOS app. The SDK requires minimal setup. Please refer ","type":"text"},{"code":"Demo.xcworkspace","type":"codeVoice"},{"type":"text","text":" for an example."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A DigitalGenius Customer Success Manager will provide you with a "},{"type":"codeVoice","code":"widgetId"},{"type":"text","text":", "},{"type":"codeVoice","code":"env"},{"type":"text","text":" and "},{"code":"scriptVersion","type":"codeVoice"},{"text":" before getting started. Please see the ","type":"text"},{"type":"codeVoice","code":"Integrating SDK to your project"},{"text":" section for details on how to integrate following settings into an iOS app using the SDK.","type":"text"}]},{"level":2,"type":"heading","text":"Installation","anchor":"Installation"},{"type":"heading","level":3,"text":"Swift Package Manager","anchor":"Swift-Package-Manager"},{"inlineContent":[{"type":"text","text":"To get started, add the DGChatSDK package as a dependency to your project:"}],"type":"paragraph"},{"type":"codeListing","syntax":null,"code":[".package(url: \"https:\/\/github.com\/DigitalGenius\/genius-chat-widget-sdk-ios.git\", from: \"1.0.0\"),"]},{"inlineContent":[{"type":"text","text":"If you‚Äôre inlcuding this package as a dependecy inside your package, add it to your target using:"}],"type":"paragraph"},{"code":[".product(name: \"DGChatSDK\", package: \"DGChatSDK\"),"],"type":"codeListing","syntax":null},{"anchor":"XCFramework","level":3,"text":"XCFramework","type":"heading"},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Get the iOS framework that contains a latest version of SDK and extract the zip file.","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Drag "},{"type":"codeVoice","code":"DGChatSDK.xcframework"},{"type":"text","text":" into your project."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Make sure ‚ÄúCopy items if needed‚Äù is selected and click Finish."}]}]},{"content":[{"inlineContent":[{"type":"text","text":"In the target settings for your app, set the "},{"type":"codeVoice","code":"DGChatSDK.xcframework"},{"type":"text","text":" to ‚ÄúEmbed & Sign‚Äù. This can be found in the ‚ÄúFrameworks, Libraries, and Embedded Content‚Äù section of the ‚ÄúGeneral‚Äù tab."}],"type":"paragraph"}]}]},{"type":"heading","anchor":"Basic-usage-example","text":"Basic usage example.","level":2},{"inlineContent":[{"text":"First of all, import ","type":"text"},{"code":"DGChatSDK","type":"codeVoice"},{"text":".","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["import DGChatSDK"],"type":"codeListing"},{"inlineContent":[{"type":"codeVoice","code":"DGChatSDK"},{"type":"text","text":" uses delegate methods to get its configuration items and provide callbacks about user actions."}],"type":"paragraph"},{"code":["final class MyViewController: UIViewController, DGChatDelegate {","","    override func viewDidLoad() {","        super.viewDidLoad()","        DGChat.shared.delegate = self","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"To make everything work as expected, you‚Äôll need to implement a ","type":"text"},{"isActive":true,"type":"reference","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChatDelegate"},{"type":"text","text":" protocol."}]},{"inlineContent":[{"text":"The most important and required delegate properties are:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"code":"DGChatDelegate.widgetId","type":"codeVoice"},{"text":" - which tells SDK your unique client identifier.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"DGChatDelegate.env"},{"text":" - environment version for your particular case.","type":"text"}]},{"inlineContent":[{"type":"codeVoice","code":"DGChatDelegate.scriptVersion"},{"text":" - a version of the script, used by your organization.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"All of these information is provided by a DigitalGenius Customer Success Manager.","type":"text"}]},{"inlineContent":[{"type":"text","text":"Plase see an example implementation below:"}],"type":"paragraph"},{"type":"codeListing","code":["var widgetId: String {","    \"b5e736c9-1508-41df-827e-212e13f52929\"","}","","var env: String {","    \"eu\"","}","","var scriptVersion: String {","    \"1.1.0\"","}"],"syntax":"swift"},{"name":"Note","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"‚ö†Ô∏è It is highly important to provide ","type":"text"},{"type":"codeVoice","code":"DGChatDelegate.scriptVersion"},{"text":" as a ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/en.wikipedia.org\/wiki\/Software_versioning"},{"text":". Otherwise, you‚Äôll encounter runtime error.","type":"text"}]}],"type":"aside"},{"inlineContent":[{"text":"And finally, just call ","type":"text"},{"type":"reference","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat\/added(to:animated:completion:)","isActive":true},{"type":"text","text":" to present a chat button on top of specified ViewController."},{"type":"text","text":" "},{"type":"text","text":"Also there is support of presenting chat over UIView using "},{"identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat\/added(to:animated:completion:)","isActive":true,"type":"reference"},{"type":"text","text":", example also provided , this gives additional ways of usage, for e.g. adding widget to PopUp or some custom containers and even over App Window if needed. Same could be also done with UIViewController approach."}],"type":"paragraph"},{"level":2,"type":"heading","anchor":"Using-Widget-metadata","text":"Using Widget metadata"},{"type":"paragraph","inlineContent":[{"text":"You can specify a ","type":"text"},{"type":"codeVoice","code":"metadata"},{"type":"text","text":", provided by vendor for your particular business needs."},{"type":"text","text":" "},{"type":"text","text":"To use that, you just need to implement proper "},{"isActive":true,"type":"reference","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChatDelegate"},{"text":" method:","type":"text"}]},{"code":["var metadata: String {","    \"\"\"","    \"currentPage\": \"some-random-string\",","    \"currentPageTitle\": \"another-random-string\"","    \"\"\"","}"],"syntax":"swift","type":"codeListing"},{"inlineContent":[{"text":"Please note: You should stick to the formatting, provided by Vendor, otherwise ","type":"text"},{"type":"codeVoice","code":"metadata"},{"type":"text","text":" will be considered as invalid without explicit errors thrown."}],"type":"paragraph"},{"level":2,"anchor":"Additional-Methods","text":"Additional Methods","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"You can use a set of additional methods to interact directly with Chat Widget. These methods are lised as a part of ","type":"text"},{"type":"reference","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat","isActive":true},{"text":" instance.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"The ","type":"text"},{"code":"sendMessage","type":"codeVoice"},{"type":"text","text":" method allows the customer to programmatically send a message on the user behalf. This method is not available once the user is handed over to a crm:"}]},{"syntax":"swift","code":["func sendMessage(_ message: String, completion: @escaping (Result<Void, Error>) -> Void)","","func sendMessage(_ message: String) async throws"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"launchWidget"},{"type":"text","text":" method allows the customer to programmatically launch the widget:"}]},{"type":"codeListing","syntax":"swift","code":["func launchWidget(_ completion: @escaping (Result<Void, Error>) -> Void)","","func launchWidget() async throws"]},{"inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"initProactiveButtons"},{"text":" method allows the customer to programmatically trigger the proactive buttons to display:","type":"text"}],"type":"paragraph"},{"type":"codeListing","code":["func initProactiveButtons(values: String, completion: @escaping (Result<Void, Error>) -> Void)","","func initProactiveButtons(values: String) async throws"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"minimizeWidget"},{"type":"text","text":" method allows customer to minimise an expanded chat UI to the ‚Äúlauncher‚Äù state programmatically:"}]},{"type":"codeListing","code":["func minimizeWidget(_ completion: @escaping (Result<Void, Error>) -> Void)","","func minimizeWidget() async throws"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"See ","type":"text"},{"identifier":"https:\/\/docs.digitalgenius.com\/docs\/methods","type":"reference","isActive":true},{"type":"text","text":" for more details."}]},{"type":"heading","anchor":"Sample-project","level":2,"text":"Sample project"},{"inlineContent":[{"type":"text","text":"The interaction model and example usage can be found in Demo project. Please note that all DGChatDelegate methods are implemented in one isolated instance for ease of use, but it‚Äôs "},{"type":"strong","inlineContent":[{"text":"not","type":"text"}]},{"type":"text","text":" a requirement."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"code":"ManualCallController.swift","type":"codeVoice"},{"type":"text","text":" - demonstrates a step-by-step call of DGChatSDK from user-defined UI."},{"type":"text","text":" "},{"code":"StraightForwardController.swift","type":"codeVoice"},{"type":"text","text":" - can be useful example for those cases, when you need to present Chat Widget during view presentation process."},{"type":"text","text":" "},{"type":"codeVoice","code":"CustomAnimationController.swift"},{"type":"text","text":" - provides an example of custom animation added to presentation\/dismissal process of Chat Widget."}]},{"type":"codeListing","code":["DGChat.added(to: self) { [weak self] chatView in","    print(\"ChatView shown with frame \\(chatView.frame)\")","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"It can be noticed that in each call of:"}]},{"syntax":"swift","type":"codeListing","code":["func added(to: UIViewController, animated: Bool, completion: ((UIView) -> Void)?)`"]},{"inlineContent":[{"text":"is that completion closure produces UIView object which is a reference to an overlay view used by DGChat SDK to represent all needed information.","type":"text"},{"text":" ","type":"text"},{"inlineContent":[{"type":"text","text":"You can use that reference to show, hide, move, adjust size and perform any other actions available for UIView to adjust DGChat‚Äôs placement, appearance and etc. according to your needs and your particular project."}],"type":"strong"},{"text":" ","type":"text"},{"type":"text","text":"Example on how that UIView can be manipulated can be found in "},{"type":"codeVoice","code":"CustomAnimationController.swift"},{"type":"text","text":"."}],"type":"paragraph"},{"anchor":"SwiftUI","type":"heading","text":"SwiftUI","level":3},{"inlineContent":[{"type":"text","text":"If you are using SwiftUI for your project, please use "},{"code":"GeniusChatView","type":"codeVoice"},{"text":" as listed on the example below:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["var body: some View {","    VStack {","        GeniusChatView(","            widgetId: \"your_widget_id\",","            env: \"some.env\",","            scriptVersion: \"1.1.0\")","    }","    .padding()","}",""]},{"level":3,"anchor":"ReactNative","text":"ReactNative","type":"heading"},{"inlineContent":[{"text":"To use Genius SDK in ReactNative projects, please follow these steps:","type":"text"}],"type":"paragraph"},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Use "},{"code":"ReactNativePublicDemo\/dgchatsdk","type":"codeVoice"},{"type":"text","text":" folder as a root."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add prebuilt framework (","type":"text"},{"code":".xcframework","type":"codeVoice"},{"text":" file) of DGChatSDK for ios into ","type":"text"},{"code":".\/dgchatsdk\/ios","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"text":"In ","type":"text"},{"code":".\/dgchatsdk folder","type":"codeVoice"},{"type":"text","text":"  run: "},{"type":"codeVoice","code":"npm install"},{"type":"text","text":"."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"After that, run: ","type":"text"},{"type":"codeVoice","code":"cd ios && pod install && cd .."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Open "},{"type":"codeVoice","code":"dgchatsdk.xcworkspace"},{"type":"text","text":" in "},{"type":"codeVoice","code":".\/ios"},{"type":"text","text":" folder to use from Xcode."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Build&run project."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Modify ","type":"text"},{"type":"codeVoice","code":"App.tsx"},{"type":"text","text":" file if needed in "},{"code":".\/dgchatsdk","type":"codeVoice"},{"type":"text","text":" folder"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Module "},{"type":"codeVoice","code":"DGChatModule"},{"type":"text","text":" has 3 functions and JS emiters for chat actions callbacks."}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Please consult example of usage in "},{"type":"codeVoice","code":"App.tsx"},{"text":".","type":"text"}],"type":"paragraph"}]}]},{"type":"paragraph","inlineContent":[{"text":"Initial setup will look like:","type":"text"}]},{"syntax":"js","code":["DGChatModule.showDGChatView(","  'Place your widgetId here',","  'Place your flowURL here',","  'Place a version of SDK here',","  'Place your widget environment here',",");"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"And a callbacks section:"}],"type":"paragraph"},{"type":"codeListing","syntax":"js","code":["const eventEmitter = new NativeEventEmitter(DGChatModule);","let onChatMinimizeClickEventListener = eventEmitter.addListener(","  'OnChatMinimizeClick',","  () => {","    DGChatModule.logActionWith('OnChatMinimizeClick');","  },",");","let onChatEndClickEventListener = eventEmitter.addListener(","  'onChatEndClick',","  () => {","    DGChatModule.logActionWith('onChatEndClick');","  },",");","let onChatLauncherClickEventListener = eventEmitter.addListener(","  'onChatLauncherClick',","  () => {","    DGChatModule.logActionWith('onChatLauncherClick');","  },",");","let onChatProactiveButtonClickEventListener = eventEmitter.addListener(","  'onChatProactiveButtonClick',","  () => {","    DGChatModule.logActionWith('onChatProactiveButtonClick');","  },",");","let onCSATPopoverCloseClicked = eventEmitter.addListener(","  'onCSATPopoverCloseClicked',","  () => {","    DGChatModule.logActionWith('onCSATPopoverCloseClicked');","  },",");"]},{"inlineContent":[{"type":"text","text":"For more detailed example, please refer to "},{"type":"codeVoice","code":"App.tsx"},{"type":"text","text":"."}],"type":"paragraph"}],"kind":"content"}],"references":{"doc://DGChatSDK/documentation/DGChatSDK":{"type":"topic","abstract":[],"url":"\/documentation\/dgchatsdk","role":"collection","title":"DGChatSDK","kind":"symbol","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK"},"doc://DGChatSDK/documentation/DGChatSDK/DGChat":{"fragments":[{"text":"class","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"DGChat"}],"identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat","abstract":[{"text":"Entry point for interaction with ","type":"text"},{"code":"DGChatSDK","type":"codeVoice"},{"type":"text","text":"."}],"type":"topic","url":"\/documentation\/dgchatsdk\/dgchat","navigatorTitle":[{"text":"DGChat","kind":"identifier"}],"title":"DGChat","kind":"symbol","role":"symbol"},"doc://DGChatSDK/documentation/DGChatSDK/DGChat/added(to:animated:completion:)":{"type":"topic","url":"\/documentation\/dgchatsdk\/dgchat\/added(to:animated:completion:)","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat\/added(to:animated:completion:)","title":"added(to:animated:completion:)","abstract":[{"text":"Adds a Chat View on in the top of ","type":"text"},{"type":"codeVoice","code":"hostController"},{"type":"text","text":"‚Äôs view hierarchy."},{"text":" ","type":"text"},{"text":"If Chat View is aleay added to the ","type":"text"},{"type":"codeVoice","code":"hostController"},{"type":"text","text":" - this method will return existing view."}],"kind":"symbol","role":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"text":"added","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"to"},{"text":": ","kind":"text"},{"text":"UIViewController","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)UIViewController"},{"kind":"text","text":", "},{"kind":"externalParam","text":"animated"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:Sb","text":"Bool"},{"text":", ","kind":"text"},{"text":"completion","kind":"externalParam"},{"text":": ((","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)UIView","text":"UIView"},{"kind":"text","text":") -> "},{"text":"Void","kind":"typeIdentifier","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")?)"}]},"https://en.wikipedia.org/wiki/Software_versioning":{"url":"https:\/\/en.wikipedia.org\/wiki\/Software_versioning","type":"link","titleInlineContent":[{"text":"Semantic versioning three-part version number","type":"text"}],"identifier":"https:\/\/en.wikipedia.org\/wiki\/Software_versioning","title":"Semantic versioning three-part version number"},"doc://DGChatSDK/documentation/DGChatSDK/DGChatDelegate":{"type":"topic","title":"DGChatDelegate","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChatDelegate","navigatorTitle":[{"kind":"identifier","text":"DGChatDelegate"}],"url":"\/documentation\/dgchatsdk\/dgchatdelegate","role":"symbol","abstract":[{"text":"Delegate for ","type":"text"},{"type":"reference","identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat","isActive":true},{"type":"text","text":" which is responsible for most of interactions with "},{"identifier":"doc:\/\/DGChatSDK\/documentation\/DGChatSDK\/DGChat","type":"reference","isActive":true},{"type":"text","text":"."},{"text":" ","type":"text"},{"text":"Provides user actions callbacks, in-chat URL opening attempt to process it inside the app","type":"text"},{"type":"text","text":" "},{"type":"text","text":"and requests configuration for SDK client which will be passed to DigitalGenius servers."}],"fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"DGChatDelegate"}],"kind":"symbol"},"https://docs.digitalgenius.com/docs/methods":{"titleInlineContent":[{"text":"full methods list","type":"text"}],"identifier":"https:\/\/docs.digitalgenius.com\/docs\/methods","type":"link","title":"full methods list","url":"https:\/\/docs.digitalgenius.com\/docs\/methods"}}}